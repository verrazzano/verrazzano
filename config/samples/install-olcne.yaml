# Copyright (c) 2020, Oracle and/or its affiliates.
# Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.

apiVersion: install.verrazzano.io/v1alpha1
kind: Verrazzano
metadata:
  name: my-olcne-install
spec:
  environmentName: uni
  profile: dev
  dns:
    external:
      suffix: abc.def.xyz.com
  ingress:
    type: LoadBalancer
    verrazzano:
      nginxInstallArgs:
        - name: controller.service.externalTrafficPolicy
          value: Local
        - name: controller.autoscaling.enabled
          value: "true"
        - name: controller.autoscaling.minReplicas
          value: "2"
        - name: controller.service.externalIPs
          valueList:
            - 152.67.140.131
      ports:
        - name: http
          port: 80
          nodePort: 30080
        - name: https
          port: 443
          nodePort: 30443
        - name: healthz
          port: 30254
          nodePort: 30254
          protocol: TCP
          targetPort: 10254
    application:
      istioInstallArgs:
        - name: gateways.istio-ingressgateway.externalIPs
          valueList:
            - 140.238.95.166
