apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "5"
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"deployment.kubernetes.io/revision":"4","meta.helm.sh/release-name":"coherence-operator","meta.helm.sh/release-namespace":"verrazzano-system"},"creationTimestamp":"2022-12-09T09:08:22Z","generation":6,"labels":{"app.kubernetes.io/component":"manager","app.kubernetes.io/created-by":"controller-manager","app.kubernetes.io/instance":"coherence-operator-manager","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"coherence-operator","app.kubernetes.io/part-of":"coherence-operator","app.kubernetes.io/version":"3.2.9","control-plane":"coherence"},"managedFields":[{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:meta.helm.sh/release-name":{},"f:meta.helm.sh/release-namespace":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/created-by":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/version":{},"f:control-plane":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{},"f:strategy":{"f:rollingUpdate":{".":{},"f:maxSurge":{},"f:maxUnavailable":{}},"f:type":{}},"f:template":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/created-by":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/version":{},"f:control-plane":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:preferredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"manager\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"CERT_TYPE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"COHERENCE_IMAGE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"OPERATOR_IMAGE\"}":{".":{},"f:name":{}},"k:{\"name\":\"OPERATOR_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}},"k:{\"name\":\"OPERATOR_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}},"k:{\"name\":\"RACK_LABEL\"}":{".":{},"f:name":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SITE_LABEL\"}":{".":{},"f:name":{}},"k:{\"name\":\"WATCH_NAMESPACE\"}":{".":{},"f:name":{}},"k:{\"name\":\"WEBHOOK_SECRET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"WEBHOOK_SERVICE\"}":{".":{},"f:name":{},"f:value":{}}},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":8000,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":8080,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":8088,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":9443,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/tmp/k8s-webhook-server/serving-certs\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"cert\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}}}}}}},"manager":"helm","operation":"Update","time":"2022-12-09T09:08:22Z"},{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{"f:template":{"f:spec":{"f:containers":{"k:{\"name\":\"manager\"}":{"f:env":{"k:{\"name\":\"OPERATOR_IMAGE\"}":{"f:value":{}}},"f:image":{}}}}}}},"manager":"kubectl","operation":"Update","time":"2023-01-03T11:50:42Z"},{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:deployment.kubernetes.io/revision":{}}},"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updatedReplicas":{}}},"manager":"kube-controller-manager","operation":"Update","subresource":"status","time":"2023-01-04T09:49:20Z"}],"name":"coherence-operator","namespace":"verrazzano-system","resourceVersion":"7389768","uid":"b648f3c4-3375-4c77-8954-1c9ebe70ed27"},"spec":{"progressDeadlineSeconds":600,"replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"control-plane":"coherence"}},"strategy":{"rollingUpdate":{"maxSurge":"25%","maxUnavailable":"25%"},"type":"RollingUpdate"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"manager","app.kubernetes.io/created-by":"controller-manager","app.kubernetes.io/instance":"coherence-operator-manager","app.kubernetes.io/managed-by":"helm","app.kubernetes.io/name":"coherence-operator","app.kubernetes.io/part-of":"coherence-operator","app.kubernetes.io/version":"3.2.9","control-plane":"coherence"}},"spec":{"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchLabels":{"app.kubernetes.io/instance":"coherence-operator-manager","app.kubernetes.io/name":"coherence-operator","app.kubernetes.io/version":"3.2.9","control-plane":"coherence"}},"topologyKey":"topology.kubernetes.io/zone"},"weight":50},{"podAffinityTerm":{"labelSelector":{"matchLabels":{"app.kubernetes.io/instance":"coherence-operator-manager","app.kubernetes.io/name":"coherence-operator","app.kubernetes.io/version":"3.2.9","control-plane":"coherence"}},"topologyKey":"oci.oraclecloud.com/fault-domain"},"weight":10},{"podAffinityTerm":{"labelSelector":{"matchLabels":{"app.kubernetes.io/instance":"coherence-operator-manager","app.kubernetes.io/name":"coherence-operator","app.kubernetes.io/version":"3.2.9","control-plane":"coherence"}},"topologyKey":"kubernetes.io/hostname"},"weight":1}]}},"containers":[{"args":["operator","--enable-leader-election"],"command":["/files/runner"],"env":[{"name":"OPERATOR_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"OPERATOR_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"WEBHOOK_SERVICE","value":"coherence-operator-webhook"},{"name":"WEBHOOK_SECRET","value":"coherence-webhook-server-cert"},{"name":"SERVICE_NAME","value":"coherence-operator-rest"},{"name":"CERT_TYPE","value":"self-signed"},{"name":"COHERENCE_IMAGE","value":"ghcr.io/oracle/coherence-ce:22.06.1"},{"name":"RACK_LABEL"},{"name":"SITE_LABEL"},{"name":"OPERATOR_IMAGE","value":"ghcr.io/oracle/coherence-operator:3.XX"},{"name":"WATCH_NAMESPACE"}],"image":"ghcr.io/oracle/coherence-operator:3.XX","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/healthz","port":"health","scheme":"HTTP"},"initialDelaySeconds":10,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"name":"manager","ports":[{"containerPort":8000,"name":"operator","protocol":"TCP"},{"containerPort":9443,"name":"webhook-server","protocol":"TCP"},{"containerPort":8080,"name":"metrics","protocol":"TCP"},{"containerPort":8088,"name":"health","protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/readyz","port":"health","scheme":"HTTP"},"initialDelaySeconds":10,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/tmp/k8s-webhook-server/serving-certs","name":"cert","readOnly":true}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"coherence-operator","serviceAccountName":"coherence-operator","terminationGracePeriodSeconds":10,"volumes":[{"name":"cert","secret":{"defaultMode":420,"secretName":"coherence-webhook-server-cert"}}]}}},"status":{"availableReplicas":1,"conditions":[{"lastTransitionTime":"2023-01-03T11:27:45Z","lastUpdateTime":"2023-01-03T11:27:45Z","message":"Deployment has minimum availability.","reason":"MinimumReplicasAvailable","status":"True","type":"Available"},{"lastTransitionTime":"2023-01-03T12:06:35Z","lastUpdateTime":"2023-01-04T09:49:20Z","message":"ReplicaSet \"coherence-operator-75fdc9b85b\" has successfully progressed.","reason":"NewReplicaSetAvailable","status":"True","type":"Progressing"}],"observedGeneration":6,"readyReplicas":1,"replicas":1,"updatedReplicas":1}}
    meta.helm.sh/release-name: coherence-operator
    meta.helm.sh/release-namespace: verrazzano-system
  creationTimestamp: "2022-12-09T09:08:22Z"
  generation: 7
  labels:
    app.kubernetes.io/component: manager
    app.kubernetes.io/created-by: controller-manager
    app.kubernetes.io/instance: coherence-operator-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: coherence-operator
    app.kubernetes.io/part-of: coherence-operator
    app.kubernetes.io/version: 3.2.9
    control-plane: coherence
  managedFields:
    - apiVersion: apps/v1
      fieldsType: FieldsV1
      fieldsV1:
        f:metadata:
          f:annotations:
            .: {}
            f:meta.helm.sh/release-name: {}
            f:meta.helm.sh/release-namespace: {}
          f:labels:
            .: {}
            f:app.kubernetes.io/component: {}
            f:app.kubernetes.io/created-by: {}
            f:app.kubernetes.io/instance: {}
            f:app.kubernetes.io/managed-by: {}
            f:app.kubernetes.io/name: {}
            f:app.kubernetes.io/part-of: {}
            f:app.kubernetes.io/version: {}
            f:control-plane: {}
        f:spec:
          f:progressDeadlineSeconds: {}
          f:replicas: {}
          f:revisionHistoryLimit: {}
          f:selector: {}
          f:strategy:
            f:rollingUpdate:
              .: {}
              f:maxSurge: {}
              f:maxUnavailable: {}
            f:type: {}
          f:template:
            f:metadata:
              f:labels:
                .: {}
                f:app.kubernetes.io/component: {}
                f:app.kubernetes.io/created-by: {}
                f:app.kubernetes.io/instance: {}
                f:app.kubernetes.io/managed-by: {}
                f:app.kubernetes.io/name: {}
                f:app.kubernetes.io/part-of: {}
                f:app.kubernetes.io/version: {}
                f:control-plane: {}
            f:spec:
              f:affinity:
                .: {}
                f:podAntiAffinity:
                  .: {}
                  f:preferredDuringSchedulingIgnoredDuringExecution: {}
              f:containers:
                k:{"name":"manager"}:
                  .: {}
                  f:args: {}
                  f:command: {}
                  f:env:
                    .: {}
                    k:{"name":"CERT_TYPE"}:
                      .: {}
                      f:name: {}
                      f:value: {}
                    k:{"name":"COHERENCE_IMAGE"}:
                      .: {}
                      f:name: {}
                      f:value: {}
                    k:{"name":"OPERATOR_IMAGE"}:
                      .: {}
                      f:name: {}
                    k:{"name":"OPERATOR_NAME"}:
                      .: {}
                      f:name: {}
                      f:valueFrom:
                        .: {}
                        f:fieldRef: {}
                    k:{"name":"OPERATOR_NAMESPACE"}:
                      .: {}
                      f:name: {}
                      f:valueFrom:
                        .: {}
                        f:fieldRef: {}
                    k:{"name":"RACK_LABEL"}:
                      .: {}
                      f:name: {}
                    k:{"name":"SERVICE_NAME"}:
                      .: {}
                      f:name: {}
                      f:value: {}
                    k:{"name":"SITE_LABEL"}:
                      .: {}
                      f:name: {}
                    k:{"name":"WATCH_NAMESPACE"}:
                      .: {}
                      f:name: {}
                    k:{"name":"WEBHOOK_SECRET"}:
                      .: {}
                      f:name: {}
                      f:value: {}
                    k:{"name":"WEBHOOK_SERVICE"}:
                      .: {}
                      f:name: {}
                      f:value: {}
                  f:imagePullPolicy: {}
                  f:livenessProbe:
                    .: {}
                    f:failureThreshold: {}
                    f:httpGet:
                      .: {}
                      f:path: {}
                      f:port: {}
                      f:scheme: {}
                    f:initialDelaySeconds: {}
                    f:periodSeconds: {}
                    f:successThreshold: {}
                    f:timeoutSeconds: {}
                  f:name: {}
                  f:ports:
                    .: {}
                    k:{"containerPort":8000,"protocol":"TCP"}:
                      .: {}
                      f:containerPort: {}
                      f:name: {}
                      f:protocol: {}
                    k:{"containerPort":8080,"protocol":"TCP"}:
                      .: {}
                      f:containerPort: {}
                      f:name: {}
                      f:protocol: {}
                    k:{"containerPort":8088,"protocol":"TCP"}:
                      .: {}
                      f:containerPort: {}
                      f:name: {}
                      f:protocol: {}
                    k:{"containerPort":9443,"protocol":"TCP"}:
                      .: {}
                      f:containerPort: {}
                      f:name: {}
                      f:protocol: {}
                  f:readinessProbe:
                    .: {}
                    f:failureThreshold: {}
                    f:httpGet:
                      .: {}
                      f:path: {}
                      f:port: {}
                      f:scheme: {}
                    f:initialDelaySeconds: {}
                    f:periodSeconds: {}
                    f:successThreshold: {}
                    f:timeoutSeconds: {}
                  f:resources: {}
                  f:terminationMessagePath: {}
                  f:terminationMessagePolicy: {}
                  f:volumeMounts:
                    .: {}
                    k:{"mountPath":"/tmp/k8s-webhook-server/serving-certs"}:
                      .: {}
                      f:mountPath: {}
                      f:name: {}
                      f:readOnly: {}
              f:dnsPolicy: {}
              f:restartPolicy: {}
              f:schedulerName: {}
              f:securityContext: {}
              f:serviceAccount: {}
              f:serviceAccountName: {}
              f:terminationGracePeriodSeconds: {}
              f:volumes:
                .: {}
                k:{"name":"cert"}:
                  .: {}
                  f:name: {}
                  f:secret:
                    .: {}
                    f:defaultMode: {}
                    f:secretName: {}
      manager: helm
      operation: Update
      time: "2022-12-09T09:08:22Z"
    - apiVersion: apps/v1
      fieldsType: FieldsV1
      fieldsV1:
        f:metadata:
          f:annotations:
            f:kubectl.kubernetes.io/last-applied-configuration: {}
        f:spec:
          f:template:
            f:spec:
              f:containers:
                k:{"name":"manager"}:
                  f:env:
                    k:{"name":"OPERATOR_IMAGE"}:
                      f:value: {}
                  f:image: {}
      manager: kubectl
      operation: Update
      time: "2023-01-03T11:50:42Z"
    - apiVersion: apps/v1
      fieldsType: FieldsV1
      fieldsV1:
        f:metadata:
          f:annotations:
            f:deployment.kubernetes.io/revision: {}
        f:status:
          f:availableReplicas: {}
          f:conditions:
            .: {}
            k:{"type":"Available"}:
              .: {}
              f:lastTransitionTime: {}
              f:lastUpdateTime: {}
              f:message: {}
              f:reason: {}
              f:status: {}
              f:type: {}
            k:{"type":"Progressing"}:
              .: {}
              f:lastTransitionTime: {}
              f:lastUpdateTime: {}
              f:message: {}
              f:reason: {}
              f:status: {}
              f:type: {}
          f:observedGeneration: {}
          f:readyReplicas: {}
          f:replicas: {}
          f:unavailableReplicas: {}
          f:updatedReplicas: {}
      manager: kube-controller-manager
      operation: Update
      subresource: status
      time: "2023-01-04T09:52:22Z"
  name: coherence-operator
  namespace: verrazzano-system
  resourceVersion: "7394665"
  uid: b648f3c4-3375-4c77-8954-1c9ebe70ed27
spec:
  progressDeadlineSeconds: 600
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      control-plane: coherence
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      creationTimestamp: null
      labels:
        app.kubernetes.io/component: manager
        app.kubernetes.io/created-by: controller-manager
        app.kubernetes.io/instance: coherence-operator-manager
        app.kubernetes.io/managed-by: helm
        app.kubernetes.io/name: coherence-operator
        app.kubernetes.io/part-of: coherence-operator
        app.kubernetes.io/version: 3.2.9
        control-plane: coherence
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: coherence-operator-manager
                    app.kubernetes.io/name: coherence-operator
                    app.kubernetes.io/version: 3.2.9
                    control-plane: coherence
                topologyKey: topology.kubernetes.io/zone
              weight: 50
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: coherence-operator-manager
                    app.kubernetes.io/name: coherence-operator
                    app.kubernetes.io/version: 3.2.9
                    control-plane: coherence
                topologyKey: oci.oraclecloud.com/fault-domain
              weight: 10
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: coherence-operator-manager
                    app.kubernetes.io/name: coherence-operator
                    app.kubernetes.io/version: 3.2.9
                    control-plane: coherence
                topologyKey: kubernetes.io/hostname
              weight: 1
      containers:
        - args:
            - operator
            - --enable-leader-election
          command:
            - /files/runner
          env:
            - name: OPERATOR_NAMESPACE
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.namespace
            - name: OPERATOR_NAME
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.name
            - name: WEBHOOK_SERVICE
              value: coherence-operator-webhook
            - name: WEBHOOK_SECRET
              value: coherence-webhook-server-cert
            - name: SERVICE_NAME
              value: coherence-operator-rest
            - name: CERT_TYPE
              value: self-signed
            - name: COHERENCE_IMAGE
              value: ghcr.io/oracle/coherence-ce:22.06.1
            - name: RACK_LABEL
            - name: SITE_LABEL
            - name: OPERATOR_IMAGE
              value: ghcr.io/oracle/coherence-operator:3.XX
            - name: WATCH_NAMESPACE
          image: ghcr.io/oracle/coherence-operator:3.XX
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: health
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: manager
          ports:
            - containerPort: 8000
              name: operator
              protocol: TCP
            - containerPort: 9443
              name: webhook-server
              protocol: TCP
            - containerPort: 8080
              name: metrics
              protocol: TCP
            - containerPort: 8088
              name: health
              protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /readyz
              port: health
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
            - mountPath: /tmp/k8s-webhook-server/serving-certs
              name: cert
              readOnly: true
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: coherence-operator
      serviceAccountName: coherence-operator
      terminationGracePeriodSeconds: 10
      volumes:
        - name: cert
          secret:
            defaultMode: 420
            secretName: coherence-webhook-server-cert
status:
  availableReplicas: 1
  conditions:
    - lastTransitionTime: "2023-01-03T11:27:45Z"
      lastUpdateTime: "2023-01-03T11:27:45Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2023-01-04T10:02:23Z"
      lastUpdateTime: "2023-01-04T10:02:23Z"
      message: ReplicaSet "coherence-operator-546fd86c45" has timed out progressing.
      reason: ProgressDeadlineExceeded
      status: "False"
      type: Progressing
  observedGeneration: 7
  readyReplicas: 1
  replicas: 2
  unavailableReplicas: 1
  updatedReplicas: 1