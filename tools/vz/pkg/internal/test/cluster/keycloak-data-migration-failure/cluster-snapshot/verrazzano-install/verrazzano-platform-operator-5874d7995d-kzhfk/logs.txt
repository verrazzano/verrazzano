# Copyright (c) 2023, Oracle and/or its affiliates.
# Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.
==== START logs for container webhookswait of pod verrazzano-install/verrazzano-platform-operator-5874d7995d-kzhfk ====
==== END logs for container webhookswait of pod verrazzano-install/verrazzano-platform-operator-5874d7995d-kzhfk ====
==== START logs for container verrazzano-platform-operator of pod verrazzano-install/verrazzano-platform-operator-5874d7995d-kzhfk ====
-rw------- 1 verrazzano verrazzano 196 Feb 13 13:17 /home/verrazzano/kubeconfig
{"level":"info","@timestamp":"2023-02-13T13:28:52.990Z","caller":"mysql/legacydb.go:288","message":"Waiting for DB load job pod to start","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"error","@timestamp":"2023-02-13T13:28:52.991Z","caller":"reconcile/upgrade_component.go:100","message":"Failed pre-upgrade for component mysql: timed out waiting for the condition","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade","stacktrace":"github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).upgradeSingleComponent\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/upgrade_component.go:100\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).upgradeComponents\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/upgrade_component.go:61\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).reconcileUpgrade\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/upgrade.go:97\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).ProcUpgradingState\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/controller.go:349\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).doReconcile\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/controller.go:200\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).Reconcile\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/controller.go:144\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/home/sakmahto/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.11.2/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/home/sakmahto/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.11.2/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/home/sakmahto/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.11.2/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/home/sakmahto/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.11.2/pkg/internal/controller/controller.go:227"}
{"level":"info","@timestamp":"2023-02-13T13:28:53.009Z","caller":"reconcile/install_component.go:60","message":"Installing components","resource_namespace":"default","resource_name":"admin","controller":"verrazzano"}
{"level":"error","@timestamp":"2023-02-13T13:28:53.064Z","caller":"reconcile/upgrade_component.go:100","message":"Failed pre-upgrade for component mysql: DB load job has failed and will be retried","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade","stacktrace":"github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).upgradeSingleComponent\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/upgrade_component.go:100\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).upgradeComponents\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/upgrade_component.go:61\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).reconcileUpgrade\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/upgrade.go:97\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).ProcUpgradingState\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/controller.go:349\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).doReconcile\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/controller.go:200\ngithub.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile.(*Reconciler).Reconcile\n\t/home/sakmahto/go/src/github.com/verrazzano/verrazzano/platform-operator/controllers/verrazzano/reconcile/controller.go:144\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\t/home/sakmahto/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.11.2/pkg/internal/controller/controller.go:114\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\t/home/sakmahto/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.11.2/pkg/internal/controller/controller.go:311\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\t/home/sakmahto/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.11.2/pkg/internal/controller/controller.go:266\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\t/home/sakmahto/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.11.2/pkg/internal/controller/controller.go:227"}
{"level":"info","@timestamp":"2023-02-13T13:29:51.156Z","caller":"mysql/legacydb.go:302","message":"DB load job pod is running or has completed successfully","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:29:51.202Z","caller":"reconcile/upgrade_component.go:106","message":"Component mysql upgrade running","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:29:51.283Z","caller":"helm/helmcli.go:227","message":"Running Helm command /usr/bin/helm upgrade mysql /verrazzano/platform-operator/thirdparty/charts/mysql --wait --namespace keycloak --install -f /tmp/helm-overrides-values-1078606186.yaml -f /verrazzano/platform-operator/helm_config/overrides/mysql-values.yaml -f /tmp/helm-overrides-verrazzano-829647034.yaml -f /tmp/helm-overrides-user-mysql-4136343378.yaml for release mysql","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql"}
{"level":"info","@timestamp":"2023-02-13T13:29:51.968Z","caller":"ready/statefulset_ready.go:27","message":"Component mysql is waiting for statefulset keycloak/mysql to exist","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql"}
{"level":"info","@timestamp":"2023-02-13T13:29:51.968Z","caller":"reconcile/upgrade_component.go:118","message":"Component mysql has been upgraded. Waiting for the component to be ready","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql"}
{"level":"info","@timestamp":"2023-02-13T13:29:52.209Z","caller":"ready/statefulset_ready.go:35","message":"Component mysql is waiting for statefulset keycloak/mysql replicas to be 1. Current updated replicas is 0","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:29:53.217Z","caller":"ready/statefulset_ready.go:40","message":"Component mysql is waiting for statefulset keycloak/mysql replicas to be 1. Current ready replicas is 0","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:29:53.254Z","caller":"reconcile/install_component.go:60","message":"Installing components","resource_namespace":"default","resource_name":"admin","controller":"verrazzano"}
{"level":"info","@timestamp":"2023-02-13T13:30:26.978Z","caller":"ready/statefulset_ready.go:47","message":"Component mysql has enough replicas for statefulsets keycloak/mysql","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:30:26.979Z","caller":"ready/pod_ready.go:83","message":"Component mysql is waiting for deployment keycloak/mysql-router replicas to be 1. Current available replicas is 0","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:30:41.318Z","caller":"ready/pod_ready.go:71","message":"Component mysql has enough replicas for deployment keycloak/mysql-router","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:30:41.318Z","caller":"mysql/legacydb.go:563","message":"Checking status of keycloak DB restoration","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:30:52.349Z","caller":"reconcile/upgrade_component.go:118","message":"Component mysql has been upgraded. Waiting for the component to be ready","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:30:54.370Z","caller":"reconcile/install_component.go:60","message":"Installing components","resource_namespace":"default","resource_name":"admin","controller":"verrazzano"}
{"level":"info","@timestamp":"2023-02-13T13:31:41.886Z","caller":"mysql/legacydb.go:563","message":"Checking status of keycloak DB restoration","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:31:52.614Z","caller":"reconcile/upgrade_component.go:118","message":"Component mysql has been upgraded. Waiting for the component to be ready","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:31:54.633Z","caller":"reconcile/install_component.go:60","message":"Installing components","resource_namespace":"default","resource_name":"admin","controller":"verrazzano"}
{"level":"info","@timestamp":"2023-02-13T13:32:42.046Z","caller":"mysql/legacydb.go:563","message":"Checking status of keycloak DB restoration","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:32:52.786Z","caller":"reconcile/upgrade_component.go:118","message":"Component mysql has been upgraded. Waiting for the component to be ready","resource_namespace":"default","resource_name":"admin","controller":"verrazzano","component":"mysql","operation":"upgrade"}
{"level":"info","@timestamp":"2023-02-13T13:32:54.806Z","caller":"reconcile/install_component.go:60","message":"Installing components","resource_namespace":"default","resource_name":"admin","controller":"verrazzano"}
==== END logs for container verrazzano-platform-operator of pod verrazzano-install/verrazzano-platform-operator-5874d7995d-kzhfk ====
