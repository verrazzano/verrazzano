# Copyright (c) 2022, 2023, Oracle and/or its affiliates.
# Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.

grafana:
  enabled: false
  forceDeployDashboards: true
  namespaceOverride: verrazzano-system
  sidecar:
    dashboards:
      label: grafana_dashboard
      labelValue: "1"
      annotations:
        k8s-sidecar-target-directory: "Prometheus Operator"
nodeExporter:
  enabled: false
kubeStateMetrics:
  enabled: false
prometheus:
  prometheusSpec:
    securityContext:
      fsGroup: 65534
      runAsGroup: 65534
      runAsNonRoot: true
      runAsUser: 65534
      seccompProfile:
        type: RuntimeDefault
    additionalScrapeConfigsSecret:
      enabled: true
      name: additional-scrape-configs
      key: jobs
    serviceMonitorSelector:
      matchExpressions:
      - key: release
        operator: In
        values:
        - prometheus-operator
        - prometheus-node-exporter
        - kube-state-metrics
        - prometheus-pushgateway
    scrapeInterval: 20s
    containers:
      - name: prometheus
        securityContext:
          privileged: false
      - name: config-reloader
        securityContext:
          privileged: false
    initContainers:
      - name: init-config-reloader
        securityContext:
          privileged: false
  serviceMonitor:
    relabelings:
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
alertmanager:
  enabled: false
  alertmanagerSpec:
    securityContext:
      fsGroup: 65534
      runAsGroup: 65534
      runAsNonRoot: true
      runAsUser: 65534
      seccompProfile:
        type: RuntimeDefault
    containers:
      - name: alertmanager
        securityContext:
          privileged: false
      - name: config-reloader
        securityContext:
          privileged: false
prometheusOperator:
  admissionWebhooks:
    enabled: true
    patch:
      enabled: true
  tls:
    enabled: true
  serviceMonitor:
    relabelings:
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
  securityContext:
    seccompProfile:
      type: RuntimeDefault
  containerSecurityContext:
    privileged: false
    capabilities:
      drop:
        - ALL

kubelet:
  serviceMonitor:
    relabelings:
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
    cAdvisorRelabelings:
      - sourceLabels: [__metrics_path__]
        targetLabel: metrics_path
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
coreDns:
  serviceMonitor:
    relabelings:
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
kubeApiServer:
  serviceMonitor:
    relabelings:
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
kubeControllerManager:
  serviceMonitor:
    relabelings:
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
kubeEtcd:
  serviceMonitor:
    relabelings:
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
kubeProxy:
  serviceMonitor:
    relabelings:
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
kubeScheduler:
  serviceMonitor:
    relabelings:
      - action: replace
        targetLabel: verrazzano_cluster
        replacement: local
