# Copyright (c) 2022, Oracle and/or its affiliates.
# Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.
apiVersion: fluentbit.fluent.io/v1alpha2
kind: ClusterOutput
metadata:
  labels:
    fluentbit.fluent.io/enabled: "true"
  name: verrazzano-system
spec:
  matchRegex: '^.*(?:_kube-|_verrazzano-|cattle-|rancher-|fleet|ingress-nginx|istio-system|keycloak|mysql-operator|_metallb-|cert-manager|_monitoring_|_local-path-storage_|_local_).*'
  opensearch:
    host: verrazzano-authproxy-opensearch.verrazzano-system.svc.cluster.local
    httpPassword:
      valueFrom:
        secretKeyRef:
          key: password
          name: verrazzano-es-internal
    httpUser:
      valueFrom:
        secretKeyRef:
          key: username
          name: verrazzano-es-internal
    dataStreamMode: true
    dataStreamName: verrazzano-system
    dataStreamTemplateName: verrazzano-data-stream
    templateFile: "/fluent-bit/etc/opensearch-config/opensearch-template-verrazzano.json"
    port: 8775
    suppressTypeName: true